<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        function saberNombre() {
            let nombre;
            do {
                nombre = prompt("¿Cúal es tu nombre?");
                if (!isNaN(nombre)) {
                    window.alert("Introduzca un nombre correcto.");
                }
            } while (!isNaN(nombre));
            return nombre;
        }
        function saberEdad() {
            let edad;
            do {
                edad = Number(prompt("¿Cúal es tu edad?"));
                if (isNaN(edad)) {
                    window.alert("Introduzca una edad válida.");
                }
            } while (isNaN(edad));
            return edad;
        }
        function saberPelicula(edad) {
            let peliculas = ['Spider Man', 'Superman', 'Dragon Ball Super', 'La era del hielo', '18 Videos'];
            let valido = false;
            let lista = "";
            peliculas.forEach(llenarLista);
            function llenarLista(valor, index, array) {
                lista += valor + "\n";
            }
            let seleccion;
            do {
                seleccion = prompt(lista + "¿Cuál es la película que quieres ver?");
                peliculas.forEach(comprobarCartelera);
                function comprobarCartelera(valor, index, array) {
                    if (seleccion.toLowerCase() == valor.toLowerCase()) {
                        seleccion = valor;
                        valido = true;
                    }
                    if (edad <= 17 && seleccion == '18 Videos') {
                        valido = false;
                        window.alert("No puedes ver esta pelicula por ser menor de edad")
                    }
                }
                if (valido == false) {
                    window.alert("Introduce un título correcto");
                }
            } while (valido == false);
            return seleccion;
        }
        function saberDescuento(edad){
            if (edad <= 17) {
                return "50%";
            } else if (edad >= 18 && edad <= 25) {
                return "0%";
            } else if (edad >= 26 && edad <= 35) {
                return "10%";
            } else {
                return "20%";
            }
        }
        function saberRegalos(edad) {
            let regalosDisponibles = ['Agua', 'Refresco', 'Palomitas', 'Caramelos', 'Perrito'];
            let regalosDados = new Array(1);
            if (edad <= 17) {
                regalosDados.push(regalosDisponibles[2],regalosDisponibles[3]);
            } else if (edad >= 18 && edad <= 25) {
                regalosDados.push(regalosDisponibles[1],regalosDisponibles[2],regalosDisponibles[4]);
            } else if (edad >= 26 && edad <= 35) {
                regalosDados.push(regalosDisponibles[1],regalosDisponibles[4]);
            } else {
                regalosDados.push(regalosDisponibles[0]);
            }
            let regalosString="";
            for(var i = 1; i<regalosDados.length;i++){
                regalosString += regalosDados[i];
                if(i<(regalosDados.length - 1)){
                    regalosString += ", "
                }
            }
            return regalosString;
        }

    </script>
</head>

<body>
    <h1>Ticket</h1>
    <p id="nombre">Nombre: </p>
    <p id="edad">Edad: </p>
    <p id="pelicula">Película: </p>
    <p id="descuento">Descuento: </p>
    <p id="regalos">Regalos: </p>
    <script>
        let nombre = saberNombre();
        let edad = saberEdad();
        let pelicula = saberPelicula(edad);
        let descuento = saberDescuento(edad);
        let regalos = saberRegalos(edad);

        console.log(nombre);
        console.log(edad);
        console.log(pelicula);
        console.log(descuento);
        console.log(regalos);
        document.getElementById("nombre").innerHTML += nombre;
        document.getElementById("edad").innerHTML += edad;
        document.getElementById("pelicula").innerHTML += pelicula;
        document.getElementById("descuento").innerHTML += descuento;
        document.getElementById("regalos").innerHTML += regalos;
    </script>

</body>

</html>